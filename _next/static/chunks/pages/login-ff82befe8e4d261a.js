(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{7237:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(1682)}])},8470:function(e,n,r){"use strict";r.d(n,{Z:function(){return d}});var t=r(8520),o=r.n(t),u=r(2804),a=r(9324);function i(e,n,r,t,o,u,a){try{var i=e[u](a),c=i.value}catch(l){return void r(l)}i.done?n(c):Promise.resolve(c).then(t,o)}function c(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var u=e.apply(n,r);function a(e){i(u,t,o,a,c,"next",e)}function c(e){i(u,t,o,a,c,"throw",e)}a(void 0)}))}}function l(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function s(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){l(e,n,r[n])}))}return e}function f(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=[],t=!0,o=!1,u=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done)&&(r.push(a.value),!n||r.length!==n);t=!0);}catch(c){o=!0,u=c}finally{try{t||null==i.return||i.return()}finally{if(o)throw u}}return r}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var v=(0,u.cn)({key:"common-auth",default:{user:null,token:null}});function d(){var e=(0,a.Z)().request,n=f((0,u.FV)(v),2),r=n[0],t=n[1];function i(){return(i=c(o().mark((function e(){var n,r,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=1,r=JSON.parse(window.localStorage.getItem("token")||"{}"),n=r.token||null,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(1),window.localStorage.removeItem("token"),e.abrupt("return",null);case 10:if(n&&n.accessToken){e.next=12;break}return e.abrupt("return",null);case 12:return e.prev=12,t={name:"John Wick",email:"johnwick@example.com"},e.abrupt("return",{user:s({},t),token:n});case 17:e.prev=17,e.t1=e.catch(12),window.localStorage.removeItem("token");case 20:case"end":return e.stop()}}),e,null,[[1,6],[12,17]])})))).apply(this,arguments)}var l=c(o().mark((function n(r,t){var u,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e({url:"/login",method:"POST",params:{email:r,password:t}});case 2:u=n.sent,console.log(u),a={accessToken:"some secure token",tokenType:"Bearer",client:"eeffgghh",expiry:"9999999999",uid:"1234-1234-1234-1234"},window.localStorage.setItem("token",JSON.stringify({token:a}));case 6:case"end":return n.stop()}}),n)}))),d=c(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.removeItem("token"),t((function(e){return s({},e,{user:null,token:null})}));case 2:case"end":return e.stop()}}),e)})));return{user:r.user,getLoginUser:function(){return i.apply(this,arguments)},login:l,logout:d}}},1682:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return N}});var t=r(5893),o=r(8520),u=r.n(o),a=r(7294),i=r(2705),c=r.n(i),l=r(5115),s=r(7226),f=r(4612),v=r(5113),d=r(917);var p=function(e){var n=e.form,r=e.name,t=e.type,o=e.render,u=e.value,a={type:t,name:r,value:u,onChange:function(e){n.onChange(r,e)}};return"checkbox"===t?(a.isChecked=!!n.values[r],"boolean"!==typeof n.values[r]&&(a.isChecked=n.values[r]===u),a.onChange=function(e){n.onChange(r,e.target.checked)}):"radio"===t?(a.isChecked=n.values[r]===u,a.onChange=function(){return n.onChange(r,u)}):"text"===t||"select"===t?(a.value="undefined"===typeof n.values[r]||null===n.values[r]?"":String(n.values[r]),a.onChange=function(e){n.onChange(r,e.target.value)}):(a.value=n.values[r],a.onChange=function(e){n.onChange(r,e)}),o(a)},h=r(8446),b=r.n(h),m=r(3279),x=r.n(m);function y(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function g(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){y(e,n,r[n])}))}return e}function w(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=[],t=!0,o=!1,u=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done)&&(r.push(a.value),!n||r.length!==n);t=!0);}catch(c){o=!0,u=c}finally{try{t||null==i.return||i.return()}finally{if(o)throw u}}return r}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var k=function(e){var n,r,t,o=(null===(n=e.context)||void 0===n?void 0:n.key)||"";if("string.regex.base"===e.type&&(o.startsWith("phone")||o.startsWith("fax")))return"".concat(null===(t=e.context)||void 0===t?void 0:t.label,"\u3092\u534a\u89d2\u6570\u5b57\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");switch(e.type){case"any.empty":var u;r="".concat(null===(u=e.context)||void 0===u?void 0:u.label,"\u306f\u5fc5\u9808\u3067\u3059");break;case"any.required":var a;r="".concat(null===(a=e.context)||void 0===a?void 0:a.label,"\u306f\u5fc5\u9808\u3067\u3059");break;case"string.min":var i,c;r="".concat(null===(i=e.context)||void 0===i?void 0:i.label,"\u3092").concat(null===(c=e.context)||void 0===c?void 0:c.limit,"\u6587\u5b57\u4ee5\u4e0a\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");break;case"string.max":var l,s;r="".concat(null===(l=e.context)||void 0===l?void 0:l.label,"\u306f\u6700\u5927").concat(null===(s=e.context)||void 0===s?void 0:s.limit,"\u6587\u5b57\u307e\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");break;case"string.uri":var f;r="".concat(null===(f=e.context)||void 0===f?void 0:f.label,"\u306fURL\u5f62\u5f0f\u3067\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");break;case"string.email":var v;r="".concat(null===(v=e.context)||void 0===v?void 0:v.label,"\u306f\u6709\u52b9\u306a\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3067\u3042\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059");break;case"number.base":var d;r="".concat(null===(d=e.context)||void 0===d?void 0:d.label,"\u6570\u5024\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");break;case"number.min":var p,h;r="".concat(null===(p=e.context)||void 0===p?void 0:p.label,"\u3092").concat(null===(h=e.context)||void 0===h?void 0:h.limit,"\u4ee5\u4e0a\u306e\u5024\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");break;case"number.max":var b,m;r="".concat(null===(b=e.context)||void 0===b?void 0:b.label,"\u306f").concat(null===(m=e.context)||void 0===m?void 0:m.limit,"\u307e\u3067\u306e\u5024\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044");break;default:var x;r="".concat(null===(x=e.context)||void 0===x?void 0:x.label,"\u306f\u7121\u52b9\u306a\u5024\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u3059")}return r},O=r(8470);function j(e,n,r,t,o,u,a){try{var i=e[u](a),c=i.value}catch(l){return void r(l)}i.done?n(c):Promise.resolve(c).then(t,o)}function E(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function S(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){E(e,n,r[n])}))}return e}function C(){var e,n,r=(e=["\n  padding-top: 25vh;\n\n  .title {\n    font-weight: bold;\n    font-size: 24px;\n    line-height: 18px;\n  }\n\n  .password-reset-link {\n    font-size: 16px;\n  }\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return C=function(){return r},r}var P=c().object({email:c().string().email({tlds:{allow:!1}}).required().label("\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"),password:c().string().required().label("\u30d1\u30b9\u30ef\u30fc\u30c9")}),I=function(){var e,n,r,o,i,c,d=function(e){var n=e.schema,r=e.options,t=void 0===r?{returnErrorOnTouched:!0}:r,o=a.useRef(),u=w(a.useState(g({returnErrorOnTouched:!0},t)),2),i=u[0],c=u[1],l=w(a.useState({}),2),s=l[0],f=l[1],v=w(a.useState({}),2),d=v[0],p=v[1],h=w(a.useState(),2),m=h[0],O=h[1],j=w(a.useState({values:{},errors:null}),2),E=j[0],S=j[1],C=a.useCallback((function(){if(!n)return S({values:s,errors:null}),{errors:null,values:s};var e=null,r=n.validate(s,{abortEarly:!1,allowUnknown:!0,convert:!0}),t=r.error,o=r.value;return t&&(e={},null===t||void 0===t||t.details.forEach((function(n){var r,t,u=!o[(null===n||void 0===n||null===(r=n.context)||void 0===r?void 0:r.key)||""],a=n.path[0];(!i.returnErrorOnTouched||i.returnErrorOnTouched&&!0===d[a])&&e&&(e[a]={message:u?"".concat(null===(t=n.context)||void 0===t?void 0:t.label,"\u306f\u5fc5\u9808\u3067\u3059"):k(n),type:n.type})}))),S({values:o,errors:e||null}),{errors:e,values:o}}),[s,n,d,i.returnErrorOnTouched]),P=a.useCallback((function(e){c((function(n){return g({},n,e)}))}),[c]),I=a.useRef(x()(C,500));a.useEffect((function(){I.current=x()(C,500)}),[C]),a.useEffect((function(){C()}),[i.returnErrorOnTouched]),a.useEffect((function(){c((function(e){return g({},e,t)}))}),[JSON.stringify(t)]),a.useEffect((function(){n&&(!0!==o.current?(C(),o.current=!0):I.current())}),[C,n,s]);var T=a.useCallback((function(e){o.current=!1,f((function(n){return g({},n,e)}))}),[]),N=a.useCallback((function(){o.current=!1,p({}),f(m)}),[m]),_=a.useCallback((function(e,n){p((function(n){return g({},n,y({},e,!0))})),f(g({},s,y({},e,n)))}),[s]),J=a.useMemo((function(){return!(!m||!s)&&!b()(m,s)}),[m,s]),V=a.useMemo((function(){return!E.errors}),[E.errors]);return{onChange:_,setInitialValues:function(e){o.current=!1,O(g({},e)),f(g({},e))},setOptions:P,reset:N,updateValues:T,validate:C,values:s,validatedValues:E.values,errors:E.errors,touched:d,isDirty:J,isValid:V}}({schema:P}),h=(0,O.Z)().login;a.useEffect((function(){d.setInitialValues({email:"",password:""})}),[]);var m,E=(m=u().mark((function e(){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=d.validate(),r=n.values,!n.errors){e.next=4;break}return d.setOptions({returnErrorOnTouched:!1}),e.abrupt("return");case 4:return e.next=6,h(r.email,r.password);case 6:return location.href="/",e.abrupt("return");case 8:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(r,t){var o=m.apply(e,n);function u(e){j(o,r,t,u,a,"next",e)}function a(e){j(o,r,t,u,a,"throw",e)}u(void 0)}))});return(0,t.jsxs)(l.W2,{css:T,children:[(0,t.jsx)(l.xu,{mb:8,children:(0,t.jsx)(l.M5,{children:(0,t.jsx)("h2",{className:"title",children:" LOGIN PAGE "})})}),(0,t.jsxs)(l.xu,{border:"1px solid",borderRadius:5,p:4,children:[(0,t.jsx)(l.xu,{mb:4,children:(0,t.jsxs)(s.NI,{isInvalid:!!(null===(e=d.errors)||void 0===e?void 0:e.email),children:[(0,t.jsx)(s.lX,{children:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"}),(0,t.jsx)(p,{form:d,name:"email",type:"text",render:function(e){return(0,t.jsx)(f.II,S({},e))}}),(0,t.jsx)(s.J1,{children:null===(n=d.errors)||void 0===n||null===(r=n.email)||void 0===r?void 0:r.message})]})}),(0,t.jsx)(l.xu,{mb:4,children:(0,t.jsxs)(s.NI,{isInvalid:!!(null===(o=d.errors)||void 0===o?void 0:o.password),children:[(0,t.jsx)(s.lX,{children:"\u30d1\u30b9\u30ef\u30fc\u30c9"}),(0,t.jsx)(p,{form:d,name:"password",type:"text",render:function(e){return(0,t.jsx)(f.II,S({},e,{type:"password"}))}}),(0,t.jsx)(s.J1,{children:null===(i=d.errors)||void 0===i||null===(c=i.password)||void 0===c?void 0:c.message})]})}),(0,t.jsx)(l.M5,{children:(0,t.jsx)(v.zx,{onClick:E,isFullWidth:!0,children:"Login"})})]})]})},T=(0,d.iv)(C()),N=function(){return(0,t.jsx)(I,{})}}},function(e){e.O(0,[375,964,774,888,179],(function(){return n=7237,e(e.s=n);var n}));var n=e.O();_N_E=n}]);